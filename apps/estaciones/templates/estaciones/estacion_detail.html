{% extends 'base.html' %}
{% load static %}
{% block title %}
<title>{{ estacion.nombre }} | REMO</title>
{% endblock title %}

{% block content %}
<!-- Content Wrapper. Contains page content -->
<div class="content-wrapper">
  <!-- Content Header (Page header) -->
  <section class="content-header">
    <div class="container-fluid">
      <div class="row mb-2">
        <div class="col-sm-6">
          <h1>{{ estacion.nombre }}</h1>
        </div>
        <div class="col-sm-6">
          <ol class="breadcrumb float-sm-right">
            <li class="breadcrumb-item"><a href="{% url 'index' %}">Inicio</a></li>
            <li class="breadcrumb-item"><a href="{% url 'estaciones' %}">Estaciones</a></li>
            <li class="breadcrumb-item active">{{ estacion.nombre }}</li>
          </ol>
        </div>
      </div>
    </div><!-- /.container-fluid -->
  </section>

  <!-- Main content -->
  <section class="content">
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-3">

          <!-- Profile Image -->
          <div class="card card-primary card-outline">
            <div class="card-body box-profile">
              <div class="text-center">
                <a href="/static/img/estaciones/{{ estacion.id_estacion }}.png" data-toggle="lightbox"
                  data-title="{{ estacion.nombre }}" data-gallery="{{ estacion.nombre }}">
                  <img src="/static/img/estaciones/{{ estacion.id_estacion }}.png" alt="{{ estacion.nombre }}"
                    class="profile-user-img img-fluid">
                </a>
              </div>

              <h3 class="profile-username text-center">{{ estacion.nombre }}</h3>

              <!-- <p class="text-muted text-center">Estación meteorológica</p> -->

              <ul class="list-group list-group-unbordered mb-3">
                <li class="list-group-item">
                  <b>Id estación</b> <a class="float-right">{{ estacion.id_estacion }}</a>
                </li>
                <li class="list-group-item">
                  <b>Id</b> <a class="float-right" id="id_estacion">{{ estacion.id }}</a>
                </li>
                <li class="list-group-item">
                  <b>Estado</b> <button type="button" class="float-right btn btn-{{ estacion.estado.color }}"
                    data-container="body" data-toggle="popover" data-placement="bottom"
                    data-content="{{ estacion.estado.requerimientos }}">
                    <i class="{{ estacion.estado.simbolo }}"></i>
                    {{ estacion.estado }}
                  </button>
                </li>
              </ul>

              <!-- <a href="#" class="btn btn-primary btn-block"><b>Follow</b></a> -->
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->

          <!-- About Me Box -->
          <div class="card card-primary">
            <div class="card-header">
              <h3 class="card-title">Acerca de:</h3>
            </div>
            <!-- /.card-header -->
            <div class="card-body" style="text-align: justify;">
              <strong><i class="fas fa-book mr-1"></i> Descripción</strong>

              <p class="text-muted">
                {{ estacion.descripcion }}
              </p>

              <hr>

              <strong><i class="fas fa-map-marker-alt mr-1"></i> Ubicación</strong>

              <p class="text-muted">
                {{ estacion.sitio }}
              </p>
              <p class="text-muted">Longitud: {{ estacion.longitud }}</p>
              <p class="text-muted">Latitud: {{ estacion.latitud }}</p>

              <hr>

              <strong><i class="fas fa-pencil-alt mr-1"></i> Responsable</strong>

              <p class="text-muted">
                {{ estacion.responsable }}
              </p>

              <hr>

              <strong><i class="far fa-file-alt mr-1"></i> Observaciones</strong>

              <p class="text-muted">{{ estacion.observaciones }}
              </p>

              <hr>

              <strong><i class="fas fa-calendar-day"></i> Fecha de inicio de registros</strong>

              <p class="text-muted">
                {{ estacion.fecha_inicio_registro }}
              </p>
            </div>
            <!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <!-- /.col -->
        <div class="col-md-9">
          <div class="card">
            <div class="card-header p-2">
              <ul class="nav nav-pills">
                <li class="nav-item"><a class="nav-link active" href="#general" data-toggle="tab">General</a></li>
                <li class="nav-item"><a class="nav-link" href="#timeline" data-toggle="tab">Historial</a></li>
                <li class="nav-item"><a class="nav-link" href="#componentes" data-toggle="tab">Componentes</a></li>
              </ul>
            </div><!-- /.card-header -->
            <div class="card-body">
              <div class="tab-content">
                <div class="active tab-pane" id="general">
                  <!-- Post -->
                  <section class="content">
                    <div class="container-fluid">
                      <!-- Small boxes (Stat box) -->
                      <div class="row">
                        <div class="col-lg-3 col-6">
                          <!-- small box -->
                          <div class="small-box bg-info">
                            <div class="inner">
                              <h3>150</h3>

                              <p>New Orders</p>
                            </div>
                            <div class="icon">
                              <i class="ion ion-bag"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                          </div>
                        </div>
                        <!-- ./col -->
                        <div class="col-lg-3 col-6">
                          <!-- small box -->
                          <div class="small-box bg-success">
                            <div class="inner">
                              <h3>53<sup style="font-size: 20px">%</sup></h3>

                              <p>Bounce Rate</p>
                            </div>
                            <div class="icon">
                              <i class="ion ion-stats-bars"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                          </div>
                        </div>
                        <!-- ./col -->
                        <div class="col-lg-3 col-6">
                          <!-- small box -->
                          <div class="small-box bg-warning">
                            <div class="inner">
                              <h3>44</h3>

                              <p>User Registrations</p>
                            </div>
                            <div class="icon">
                              <i class="ion ion-person-add"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                          </div>
                        </div>
                        <!-- ./col -->
                        <div class="col-lg-3 col-6">
                          <!-- small box -->
                          <div class="small-box bg-danger">
                            <div class="inner">
                              <h3>65</h3>

                              <p>Unique Visitors</p>
                            </div>
                            <div class="icon">
                              <i class="ion ion-pie-graph"></i>
                            </div>
                            <a href="#" class="small-box-footer">More info <i class="fas fa-arrow-circle-right"></i></a>
                          </div>
                        </div>
                        <!-- ./col -->
                      </div>
                      <!-- /.row -->
                      <!-- Main row -->
                      <div class="row">
                        <!-- Left col -->
                        <section class="col-lg-7 connectedSortable">
                          <!-- Custom tabs (Charts with tabs)-->
                          <div class="card">
                            <div class="card-header">
                              <h3 class="card-title">
                                <i class="fas fa-chart-pie mr-1"></i>
                                Sales
                              </h3>
                              <div class="card-tools">
                                <ul class="nav nav-pills ml-auto">
                                  <li class="nav-item">
                                    <a class="nav-link active" href="#revenue-chart" data-toggle="tab">Area</a>
                                  </li>
                                  <li class="nav-item">
                                    <a class="nav-link" href="#sales-chart" data-toggle="tab">Donut</a>
                                  </li>
                                </ul>
                              </div>
                            </div><!-- /.card-header -->
                            <div class="card-body">
                              <div class="tab-content p-0">
                                <!-- Morris chart - Sales -->
                                <div class="chart tab-pane active" id="revenue-chart"
                                  style="position: relative; height: 300px;">
                                  <canvas id="revenue-chart-canvas" height="300" style="height: 300px;"></canvas>
                                </div>
                                <div class="chart tab-pane" id="sales-chart" style="position: relative; height: 300px;">
                                  <canvas id="sales-chart-canvas" height="300" style="height: 300px;"></canvas>
                                </div>
                              </div>
                            </div><!-- /.card-body -->
                          </div>
                          <!-- /.card -->

                          <div class="card card-primary">
                            <div class="card-header">
                              <h4 class="card-title">Imágenes</h4>
                              <!-- tools card -->
                              <div class="card-tools">
                                <button type="button" class="btn btn-primary btn-sm" data-card-widget="collapse">
                                  <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-primary btn-sm" data-card-widget="remove">
                                  <i class="fas fa-times"></i>
                                </button>
                              </div>
                              <!-- /. tools -->
                            </div>

                            <div class="card-body">
                              <div class="row">
                                <div class="col-sm-2">
                                  <a href="{% static 'img/E_Puerto_Bolivar.jpg' %}" data-toggle="lightbox"
                                    data-title="Estación meteorológica" data-gallery="gallery">
                                    <img src="{% static 'img/E_Puerto_Bolivar.jpg' %}" alt="white sample"
                                      class="img-fluid mb-2">

                                  </a>
                                </div>
                                <div class="col-sm-2">
                                  <a href="https://via.placeholder.com/1200/000000.png?text=2" data-toggle="lightbox"
                                    data-title="sample 2 - black" data-gallery="gallery">
                                    <img src="https://via.placeholder.com/300/000000?text=2" class="img-fluid mb-2"
                                      alt="black sample" />
                                  </a>
                                </div>
                              </div>
                            </div>
                          </div>

                        </section>
                        <!-- /.Left col -->
                        <!-- right col (We are only adding the ID to make the widgets sortable)-->
                        <section class="col-lg-5 connectedSortable">

                          <!-- Map card -->
                          <div class="card bg-gradient-primary">
                            <div class="card-header border-0">
                              <h3 class="card-title">
                                <i class="fas fa-map-marker-alt mr-1"></i>
                                Geolocalización
                              </h3>
                              <!-- card tools -->
                              <div class="card-tools">
                                <button type="button" class="btn btn-primary btn-sm" data-card-widget="collapse"
                                  title="Collapse">
                                  <i class="fas fa-minus"></i>
                                </button>
                              </div>
                              <!-- /.card-tools -->
                            </div>
                            <div class="card-body">
                              <div id="geovisor" style="height: 250px; width: 100%;"></div>
                            </div>
                            <!-- /.card-body-->
                          </div>
                          <!-- /.card -->

                          <!-- Calendar -->
                          <div class="card bg-gradient-success">
                            <div class="card-header border-0">

                              <h3 class="card-title">
                                <i class="far fa-calendar-alt"></i>
                                Calendar
                              </h3>
                              <!-- tools card -->
                              <div class="card-tools">
                                <!-- button with a dropdown -->
                                <div class="btn-group">
                                  <button type="button" class="btn btn-success btn-sm dropdown-toggle"
                                    data-toggle="dropdown" data-offset="-52">
                                    <i class="fas fa-bars"></i>
                                  </button>
                                  <div class="dropdown-menu" role="menu">
                                    <a href="#" class="dropdown-item">Add new event</a>
                                    <a href="#" class="dropdown-item">Clear events</a>
                                    <div class="dropdown-divider"></div>
                                    <a href="#" class="dropdown-item">View calendar</a>
                                  </div>
                                </div>
                                <button type="button" class="btn btn-success btn-sm" data-card-widget="collapse">
                                  <i class="fas fa-minus"></i>
                                </button>
                                <button type="button" class="btn btn-success btn-sm" data-card-widget="remove">
                                  <i class="fas fa-times"></i>
                                </button>
                              </div>
                              <!-- /. tools -->
                            </div>
                            <!-- /.card-header -->
                            <div class="card-body pt-0">
                              <!--The calendar -->
                              <div id="calendar" style="width: 100%"></div>
                            </div>
                            <!-- /.card-body -->
                          </div>
                          <!-- /.card -->
                        </section>
                        <!-- right col -->
                      </div>
                      <!-- /.row (main row) -->
                    </div><!-- /.container-fluid -->
                  </section>
                  <!-- /.post -->

                  <!-- Post -->
                  <div class="post clearfix">
                    <div class="user-block">
                      <img class="img-circle img-bordered-sm" src="../../dist/img/user7-128x128.jpg" alt="User Image">
                      <span class="username">
                        <a href="#">Sarah Ross</a>
                        <a href="#" class="float-right btn-tool"><i class="fas fa-times"></i></a>
                      </span>
                      <span class="description">Sent you a message - 3 days ago</span>
                    </div>
                    <!-- /.user-block -->
                    <p>
                      Lorem ipsum represents a long-held tradition for designers,
                      typographers and the like. Some people hate it and argue for
                      its demise, but others ignore the hate as they create awesome
                      tools to help create filler text for everyone from bacon lovers
                      to Charlie Sheen fans.
                    </p>

                    <form class="form-horizontal">
                      <div class="input-group input-group-sm mb-0">
                        <input class="form-control form-control-sm" placeholder="Response">
                        <div class="input-group-append">
                          <button type="submit" class="btn btn-danger">Send</button>
                        </div>
                      </div>
                    </form>
                  </div>
                  <!-- /.post -->

                  <!-- Post -->

                  <!-- /.post -->
                </div>
                <!-- /.tab-pane -->
                <div class="tab-pane" id="timeline">
                  <!-- The timeline -->
                  <div class="timeline timeline-inverse">
                    <!-- timeline time label -->
                    <div class="time-label">
                      <span class="bg-danger">
                        10 Feb. 2014
                      </span>
                    </div>
                    <!-- /.timeline-label -->
                    <!-- timeline item -->
                    <div>
                      <i class="fas fa-envelope bg-primary"></i>

                      <div class="timeline-item">
                        <span class="time"><i class="far fa-clock"></i> 12:05</span>

                        <h3 class="timeline-header"><a href="#">Support Team</a> sent you an email</h3>

                        <div class="timeline-body">
                          Etsy doostang zoodles disqus groupon greplin oooj voxy zoodles,
                          weebly ning heekya handango imeem plugg dopplr jibjab, movity
                          jajah plickers sifteo edmodo ifttt zimbra. Babblely odeo kaboodle
                          quora plaxo ideeli hulu weebly balihoo...
                        </div>
                        <div class="timeline-footer">
                          <a href="#" class="btn btn-primary btn-sm">Read more</a>
                          <a href="#" class="btn btn-danger btn-sm">Delete</a>
                        </div>
                      </div>
                    </div>
                    <!-- END timeline item -->
                    <!-- timeline item -->
                    <div>
                      <i class="fas fa-user bg-info"></i>

                      <div class="timeline-item">
                        <span class="time"><i class="far fa-clock"></i> 5 mins ago</span>

                        <h3 class="timeline-header border-0"><a href="#">Sarah Young</a> accepted your friend request
                        </h3>
                      </div>
                    </div>
                    <!-- END timeline item -->
                    <!-- timeline item -->
                    <div>
                      <i class="fas fa-comments bg-warning"></i>

                      <div class="timeline-item">
                        <span class="time"><i class="far fa-clock"></i> 27 mins ago</span>

                        <h3 class="timeline-header"><a href="#">Jay White</a> commented on your post</h3>

                        <div class="timeline-body">
                          Take me to your leader!
                          Switzerland is small and neutral!
                          We are more like Germany, ambitious and misunderstood!
                        </div>
                        <div class="timeline-footer">
                          <a href="#" class="btn btn-warning btn-flat btn-sm">View comment</a>
                        </div>
                      </div>
                    </div>
                    <!-- END timeline item -->
                    <!-- timeline time label -->
                    <div class="time-label">
                      <span class="bg-success">
                        3 Jan. 2014
                      </span>
                    </div>
                    <!-- /.timeline-label -->
                    <!-- timeline item -->
                    <div>
                      <i class="fas fa-camera bg-purple"></i>

                      <div class="timeline-item">
                        <span class="time"><i class="far fa-clock"></i> 2 days ago</span>

                        <h3 class="timeline-header"><a href="#">Mina Lee</a> uploaded new photos</h3>

                        <div class="timeline-body">
                          <img src="https://placehold.it/150x100" alt="...">
                          <img src="https://placehold.it/150x100" alt="...">
                          <img src="https://placehold.it/150x100" alt="...">
                          <img src="https://placehold.it/150x100" alt="...">
                        </div>
                      </div>
                    </div>
                    <!-- END timeline item -->
                    <div>
                      <i class="far fa-clock bg-gray"></i>
                    </div>
                  </div>
                </div>
                <!-- /.tab-pane -->

                <div class="tab-pane" id="componentes">

                  <!-- Main content -->
                  <section class="content">

                    <!-- Default box -->
                    <!-- {{ estacion.componentes.all }}
                    {{ estacion.sensores.all }} -->
                    {% if estacion.componentes.all %}
                    <div class="card-body pb-0">
                      <div class="row d-flex align-items-stretch">
                        <!-- Nombrar componentes  -->
                        {% for componente_estacion in estacion.componentes.all %}
                        <div class="col-12 col-sm-6 col-md-6 d-flex align-items-stretch">
                          <div class="card bg-light">
                            <div class="card-header text-muted border-bottom-0">
                              <h2 class="lead"><b>{{ componente_estacion.componente.nombre }}</b></h2>
                            </div>
                            <div class="card-body pt-0">
                              <div class="row">
                                <div class="col-7">
                                  <p class="text-muted text-sm"><b>Referencia: </b>
                                    {{ componente_estacion.componente.referencia }}</p>
                                  <p class="text-muted text-sm"><b>id:
                                    </b>{{ componente_estacion.id }}</p>
                                  <button type="button" class="btn btn-{{ componente_estacion.estado.color }}"
                                    data-container="body" data-toggle="popover" data-placement="bottom"
                                    data-content="{{ componente_estacion.estado.requerimientos }}">
                                    <i class="{{ componente_estacion.estado.simbolo }}"></i>
                                    {{ componente_estacion.estado }}
                                  </button>
                                </div>
                                <div class="col-5 text-center">
                                  <a href="/static/img/componente_estacion/{{ componente_estacion.id }}.png"
                                    data-toggle="lightbox" data-title="{{ componente_estacion.componente }}"
                                    data-gallery="{{ componente_estacion.componente }}">
                                    <img src="/static/img/componente_estacion/{{ componente_estacion.id }}.png"
                                      alt="{{ componente_estacion.componente }}" class="img-fluid">
                                  </a>
                                </div>

                              </div>
                            </div>
                            <div class="card-footer">
                              <div class="text-right">
                                <a href="{{ componente_estacion.get_absolute_url }}" class="btn btn-sm btn-primary">
                                  <i class="fas fa-info-circle"></i> Ver más
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                        {% endfor %}
                        {% if is_paginated %}
                        <div class="container">
                          <nav aria-label="...">
                            <ul class="pagination justify-content-center">

                              {% if page_obj.has_previous %}
                              <li class="page-item">
                                <a class="page-link"
                                  href="{{ request.path }}?page={{ page_obj.previous_page_number }}"><i
                                    class="fas fa-angle-double-left"></i></a>
                              </li>
                              {% endif %}

                              {% for i in paginator.page_range %}
                              {% if page_obj.number == i %}
                              <li class="page-item active"><a class="page-link" href="?page={{i}}">{{ i }}</a></li>
                              {% else %}
                              <li class="page-item"><a class="page-link" href="?page={{i}}">{{ i }}</a></li>
                              {% endif %}
                              {% endfor %}

                              {% if page_obj.has_next %}
                              <li class="page-item">
                                <a class="page-link" href="{{ request.path }}?page={{ page_obj.next_page_number }}"><i
                                    class="fas fa-angle-double-right"></i></a>
                              </li>
                              {% endif %}
                            </ul>
                          </nav>
                        </div>
                        {% endif %}
                      </div>
                    </div>
                    {% else %}
                    <p>No hay componentes</p>
                    {% endif %}
                    <!-- /.card-body -->
                  </section>
                  <!-- /.content -->
                </div>
                <!-- /.tab-pane -->
              </div>
              <!-- /.tab-content -->
            </div><!-- /.card-body -->
          </div>
          <!-- /.card -->
        </div>
        <!-- /.col -->
      </div>
      <!-- /.row -->
    </div><!-- /.container-fluid -->
  </section>
  <!-- /.content -->
</div>
<!-- /.content-wrapper -->
{% endblock content %}